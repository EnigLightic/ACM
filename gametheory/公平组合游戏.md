# 公平组合游戏

## Nim游戏

### 游戏内容

有n堆石子,两个人轮流选取一堆取任意多枚石子,不能不取.取得最后一枚石子的人赢得游戏,问谁能获得最终胜利

### 状态的定义

1. 没有后继状态的状态是必败状态
2. 一个状态是必胜状态,当且仅当它至少有一个后继状态是必败状态
3. 一个状态是必败状态当且仅当它的所有后继状态是必胜状态

### 回到Nim游戏

如果当前时间石子的Nim和为0(所有石子异或和为0),那么现在的状态是必败状态

所以可以在O(n)的复杂度下判断一个状态是否是先手必胜状态

## SG理论(Sprague-Grundy理论)

所有公平组合游戏都等价于单堆Nim游戏.

应用是如果一个游戏由多个相互独立的子游戏组成,可以通过SG函数把子游戏的Nim游戏值算出来,进而进行异或算出Nim和.









